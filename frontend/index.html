<!doctype html>
<html lang="zh">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes">
    <title>氣泡數監控程式</title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.15.2/moment.min.js"></script>
    <!-- <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.15.2/locale/zh-tw.js"></script> -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.16.0/moment-with-locales.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.5.9/moment-timezone-with-data.min.js"></script>
    <!-- <link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/base/jquery-ui.css"> -->
    <!-- <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script> -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css">
    <!-- <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootswatch/3.3.7/spacelab/bootstrap.min.css"> -->
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="./js/flowControl.js"></script>
    <script src="./js/inlineEdit.js"></script>
    <script src="./js/model.js"></script>
    <script src="./js/serverInfo.js"></script>
    <script src="./js/tableConstruction.js"></script>
    <script src="./js/utilityCollection.js"></script>
</head>

<body>
    <div class="container">
        <div class="row">
            <div class="page-header">
                <h1>統義玻璃股份有限公司&nbsp;<small>氣泡數監控程式</small></h1>
                <h5 id="clockBanner"></h5>
            </div>
            <table id="situationTable" class="table table-bordered table-condensed table-hover">
                <caption>
                    <button id="preventDisplayToggleButton" type="button" class="btn btn-default btn-lg" onclick="togglePreventDisplay()">顯示</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <button id="editModeToggleButton" type="button" class="subjectToAccessControl btn btn-default btn-lg" onclick="toggleEditMode()" disabled>修改模式</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <button id="previousButton" type="button" class="subjectToAccessControl btn btn-default btn-lg navigation" onclick="previous()" disabled>前一日</button>
                    <button id="refreshButton" type="button" class="subjectToAccessControl btn btn-default btn-lg navigation" onclick="refresh()" disabled>資料重整</button>
                    <button id="nextButton" type="button" class="subjectToAccessControl btn btn-default btn-lg navigation" onclick="next()" disabled>下一日</button>
                    <button id="todayButton" type="button" class="subjectToAccessControl btn btn-default btn-lg navigation" onclick="today()" disabled>返回今日</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <input id="designatedDate" type="date" class="input-lg">
                    <button id="switchDateButton" type="button" class="subjectToAccessControl btn btn-default btn-lg navigation" onclick="switchToDate()" disabled>檢視指定日期資料</button>
                    <h3><span id="workingDateBanner"></span>&nbsp;氣泡數統計資料</h3>
                </caption>
                <thead>
                    <tr id="situationTableHeading">
                    </tr>
                </thead>
                <tbody id="situationTableDataSection">
                </tbody>
                <tfoot>
                    <tr id="situationTableFooter">
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>
</body>

</html>

<script>
    "use strict";

    var workingTimezone = "Asia/Taipei";
    var initializeDatetime = moment.tz(moment(), workingTimezone);
    var workingDate = getWorkDateString(initializeDatetime);

    $(document).ready(function() {
        $("h5#clockBanner").text(initializeDatetime.format("YYYY-MM-DD HH:mm:ss"));
        $("input#designatedDate").val(workingDate);
        constructSituationTable(workingDate);
        autoRefresh();
    });
</script>